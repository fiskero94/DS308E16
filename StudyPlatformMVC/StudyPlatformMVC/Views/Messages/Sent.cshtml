@using StudyPlatformMVC.Models
@model List<Message>
@{
    ViewBag.Title = "Udbakke";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@if (Model.Count == 0)
{
    <p>Du har ikke sendt nogen beskeder</p>
    <br /><br />
}
<a href="#" class="btn btn-default">Ny besked</a>
<br /><br />
@if (Model.Count > 0)
{
    <table class="table table-striped table-hover ">
        <thead>
            <tr>
                <th>Titel</th>
                <th>Modtagere</th>
                <th>Dato</th>
            </tr>
        </thead>
        <tbody>
            @foreach (Message message in Model)
            {@AddMessage(message)}
        </tbody>
    </table>
}
@helper AddMessage(Message message)
{<tr><td>@message.Title</td><td>@AddRecipients(message)</td><td>@message.DateTimeSent</td></tr>}
@helper AddRecipients(Message message)
{
    string recipients = "";
    foreach (Person recipient in message.Recipients)
    {
        recipients += recipient.Name;
        recipients += ", ";
    }
    recipients = recipients.TrimEnd(' ');
    recipients = recipients.TrimEnd(',');
    @Html.Label(recipients)
}